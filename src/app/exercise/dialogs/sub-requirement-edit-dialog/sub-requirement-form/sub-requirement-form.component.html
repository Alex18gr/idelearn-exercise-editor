<section class="sub-equirement-form-container" *ngIf="classSubRequirementForm">
    <h2>{{ formHeader }}</h2>
    <div [ngSwitch]="subRequirementType">
        <form class="sub-requirement-form" [formGroup]="classSubRequirementForm" *ngSwitchCase="'extend'">
            <!-- <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-dropdown inputId="mainClass" [autoDisplayFirst]="false" [options]="currentExerciseClassList"
                        optionLabel="name" optionValue="id" appendTo="body" formControlName="mainClass"
                        styleClass="sub-requirement-type-custom-dropdown">
                    </p-dropdown>
                    <label for="mainClass">Class Name</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.mainClass)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.mainClass) }}
                </small>
            </div> -->
            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-dropdown inputId="extendClass" [autoDisplayFirst]="false" [options]="currentExerciseClassList"
                        optionLabel="name" optionValue="id" appendTo="body" formControlName="extendClass"
                        styleClass="sub-requirement-type-custom-dropdown">
                    </p-dropdown>
                    <label for="extendClass">Extend Name</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.extendClass)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.extendClass) }}
                </small>
            </div>
        </form>

        <form class="sub-requirement-form" [formGroup]="classSubRequirementForm" *ngSwitchCase="'contains'">
            <!-- <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-dropdown inputId="mainClass" [autoDisplayFirst]="false" [options]="currentExerciseClassList"
                        optionLabel="name" optionValue="id" appendTo="body" formControlName="mainClass"
                        styleClass="sub-requirement-type-custom-dropdown">
                    </p-dropdown> <label for="mainClass">Class Name</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.mainClass)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.mainClass) }}
                </small>
            </div> -->
            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-dropdown inputId="containClass" [autoDisplayFirst]="false" [options]="currentExerciseClassList"
                        optionLabel="name" optionValue="id" appendTo="body" formControlName="containClass"
                        styleClass="sub-requirement-type-custom-dropdown">
                    </p-dropdown>
                    <label for="containClass">Contain Class</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.containClass)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.containClass) }}
                </small>
            </div>

            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-dropdown inputId="relationType" [autoDisplayFirst]="false" [options]="relationTypes"
                        optionLabel="label" optionValue="value" appendTo="body" formControlName="relationType"
                        styleClass="sub-requirement-type-custom-dropdown">
                    </p-dropdown>
                    <label for="relationType">Relation Type</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.containClass)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.containClass) }}
                </small>
            </div>
        </form>

        <form class="sub-requirement-form" [formGroup]="classSubRequirementForm" *ngSwitchCase="'contains-field'">
            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <input type="text" id="fieldName" class="custom-input-text" formControlName="fieldName"
                        pInputText>
                    <label for="fieldName">Field Name</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.fieldName)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.fieldName) }}
                </small>
            </div>

            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-multiSelect inputId="modifiers" [options]="modifiers"
                        optionLabel="label" optionValue="value" appendTo="body" formControlName="modifiers"
                        display="chip" styleClass="sub-requirement-type-custom-dropdown"></p-multiSelect>
                    <label for="modifiers">Modifiers</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.modifiers)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.modifiers) }}
                </small>
            </div>

            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <input type="text" id="type" class="custom-input-text" formControlName="type"
                        pInputText>
                    <label for="type">Type</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.type)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.type) }}
                </small>
            </div>
        </form>

        <form class="sub-requirement-form" [formGroup]="classSubRequirementForm" *ngSwitchCase="'method'">
            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <input type="text" id="name" class="custom-input-text" formControlName="name"
                        pInputText>
                    <label for="name">Method Name</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.name)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.name) }}
                </small>
            </div>

            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <p-multiSelect inputId="modifiers" [options]="modifiers"
                        optionLabel="label" optionValue="value" appendTo="body" formControlName="modifiers"
                        display="chip" styleClass="sub-requirement-type-custom-dropdown"></p-multiSelect>
                    <label for="modifiers">Modifiers</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.modifiers)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.modifiers) }}
                </small>
            </div>

            <div class="p-field sub-requirement-input-group">
                <span class="p-float-label">
                    <input type="text" id="type" class="custom-input-text" formControlName="type"
                        pInputText>
                    <label for="type">Type</label>
                </span>
                <small *ngIf="isControlInvalid(classSubRequirementForm.controls.type)" class="p-invalid">
                    {{ getErrorMessage(classSubRequirementForm.controls.type) }}
                </small>
            </div>

            <div class="sub-requirement-input-group" formArrayName="parameters">
                <div class="parameters-header">
                    <h3 class="parameters-header-title">Parameters</h3>
                    <button pButton pRipple type="button" class="p-button-raised p-button-sm" label="Add" icon="pi pi-plus" (click)="addParameter()"></button>
                </div>
                <div *ngFor="let parameterGroup of getParameters().controls; index as i">
                    <div class="parameter-input" [formGroupName]="i">
                        <span class="p-float-label parameter-field">
                            <input type="text" id="parameterName" class="parameter-input-text" formControlName="name"
                                pInputText>
                            <label for="parameterName">Name</label>
                        </span>
                        <span class="p-float-label parameter-field">
                            <input type="text" id="type" class="parameter-input-text" formControlName="type"
                                pInputText>
                            <label for="type">Type</label>
                        </span>
                        <button pButton pRipple type="button" class="p-button-raised p-button-sm p-button-danger" icon="pi pi-times" (click)="removeParameter(i)"></button>
                    </div>
                </div>
            </div>
        </form>

    </div>
</section>